import{d as _,r as p,b as h,t as f,o as b,c as g,a as e,w as u,v as i,e as k,f as m,g as y,h as R,F as V,u as x,i as I,j as C,B}from"./index-Ikt9DQWL.js";const N=e("h1",null,"註冊頁 RegisterView",-1),U={style:{"max-width":"300px"}},D=e("label",{for:"emailInput"},"信箱 Email",-1),F=e("br",null,null,-1),L=e("br",null,null,-1),M=e("label",{for:"passwordInput"},"密碼 Password",-1),E=e("br",null,null,-1),H=e("br",null,null,-1),P=e("label",{for:"password2Input"},"驗證密碼 Password Confirm",-1),T=e("br",null,null,-1),$=e("br",null,null,-1),j=e("label",{for:"nicknameInput"},"暱稱 Nickname",-1),A=e("br",null,null,-1),K=e("br",null,null,-1),q=e("hr",null,null,-1),J=_({__name:"RegisterView",setup(z){const d=x(),t=p({email:"",password:"",password2:"",nickname:""});h(async()=>{await f(!0)||(alert("你已登入，將跳轉至首頁"),d.push("/"))});const c=async()=>{var l;if(!v())return;const a=`${B}/users/sign_up`,s={email:t.value.email,password:t.value.password,nickname:t.value.nickname};let o;try{o=(await C.post(a,s)).data}catch(r){const n=r==null?void 0:r.response,w=(l=n==null?void 0:n.data)!=null&&l.message?`註冊失敗，${n.data.message}`:"註冊失敗";alert(w),o=n==null?void 0:n.data}o.status&&(alert("註冊成功，將跳轉至登入頁"),d.push("/login"))},v=()=>{const a=p(!0);return!t.value.email||!t.value.password||!t.value.password2||!t.value.nickname?(alert("請輸入信箱與密碼"),a.value=!1,a.value):t.value.password!==t.value.password2?(alert("請確認兩次輸入的密碼相同"),a.value=!1,a.value):(t.value.password.length<6&&(alert("密碼長度不得小於 6 個字元"),a.value=!1),a.value)};return(a,s)=>{const o=I("RouterLink");return b(),g(V,null,[N,e("div",U,[D,F,u(e("input",{id:"emailInput",style:{width:"100%","margin-bottom":"0.5rem"},type:"email","onUpdate:modelValue":s[0]||(s[0]=l=>t.value.email=l)},null,512),[[i,t.value.email]]),L,M,E,u(e("input",{id:"passwordInput",style:{width:"100%","margin-bottom":"0.5rem"},type:"password","onUpdate:modelValue":s[1]||(s[1]=l=>t.value.password=l)},null,512),[[i,t.value.password]]),H,P,T,u(e("input",{id:"password2Input",style:{width:"100%","margin-bottom":"0.5rem"},type:"password","onUpdate:modelValue":s[2]||(s[2]=l=>t.value.password2=l)},null,512),[[i,t.value.password2]]),$,j,A,u(e("input",{id:"nicknameInput",style:{width:"100%","margin-bottom":"0.5rem"},type:"text","onUpdate:modelValue":s[3]||(s[3]=l=>t.value.nickname=l)},null,512),[[i,t.value.nickname]]),K,e("button",{style:{width:"100%","margin-bottom":"0.5rem"},onClick:k(c,["prevent"])}," 註冊 Register "),q,e("span",null,[m("已有帳號? "),y(o,{to:"/login"},{default:R(()=>[m("登入 Login")]),_:1})])])],64)}}});export{J as default};
